{"version":3,"file":"src_app_festival_festival_module_ts.js","mappings":"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","sources":["./src/app/festival/festival-routing.module.ts","./src/app/festival/festival.module.ts","./src/app/festival/festival.page.ts","./src/app/services/festival-service.service.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { FestivalPage } from './festival.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FestivalPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class FestivalPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { FestivalPageRoutingModule } from './festival-routing.module';\n\nimport { FestivalPage } from './festival.page';\nimport { FooterPage } from '../footer/footer.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    FestivalPageRoutingModule\n  ],\n  declarations: [FestivalPage, FooterPage]\n})\nexport class FestivalPageModule {}\n","\nimport { Component, OnInit } from '@angular/core';\nimport { FestivalService } from '../services/festival-service.service';\nimport { festival } from '../models/festival/festival.module';\nimport { ActivatedRoute, Params, Router } from '@angular/router';\nimport { comentario } from '../models/comentario/comentario.module';\nimport { concurso } from '../models/concurso/concurso.module';\nimport { empresa } from '../models/empresa/empresa.module';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { CrudService } from '../services/crud.service';\nimport { AuthService } from '../services/auth.service';\nimport { ConcursoService } from 'src/app/services/concurso.service';\n\n@Component({\n  selector: 'app-festival',\n  templateUrl: './festival.page.html',\n  styleUrls: ['./festival.page.scss'],\n})\nexport class FestivalPage implements OnInit {\n  crud: CrudService;\n  // authy: AuthService;\n  comentariosForm: FormGroup;\n  objFestival: festival[] = [];\n  listComentarios: comentario[] = [];\n  listConcursos: concurso[] = [];\n  listEmpresas: empresa[] = [];\n  id: number | undefined;\n  toastr: any;\n  userLogged: boolean = false;\n  isCompany: boolean = false;\n\n  constructor(\n    private festivalService: FestivalService,\n    private router: Router,\n    private rutaActiva: ActivatedRoute,\n    private fb: FormBuilder,\n    private authy: AuthService,\n    private crudd: CrudService) {\n      // this.authy=auth;\n      this.crud=crudd;\n      this.comentariosForm = this.fb.group({\n        userName: ['', Validators.required],\n        comentario: ['', Validators.required],\n      })\n    }\n\n  ngOnInit(): void {\n    this.obtenerFestival();\n    this.obtenerId();\n    this.obtenerComentarios();\n    this.obtenerConcursos();\n    this.obtenerEmpresas();\n  }\n\n  obtenerId(){\n    console.log(\"Entra en obtener Id\");\n    this.rutaActiva.params.subscribe(\n      (params: Params) => {\n        this.id = params['id'];\n      }\n    );\n\n  }\n\n  obtenerFestival(){\n    this.festivalService.obtenerFestival().subscribe(doc => {\n      this.objFestival = [];\n      doc.forEach((element: any) => {\n        if(this.id == element.payload.doc.data().id){\n          this.objFestival.push({\n            id: element.payload.doc.id,\n            ...element.payload.doc.data()\n          })\n        }\n      });\n    })\n  }\n\n  obtenerComentarios(){\n    this.festivalService.obtenerComentarios().subscribe(doc => {\n      this.listComentarios = [];\n      doc.forEach((element: any) => {\n        this.listComentarios.push({\n          id: element.payload.doc.id,\n          ...element.payload.doc.data()\n        })\n      });\n    })\n  }\n\n  agregarComentarios() {\n    const entrada: any = {\n      userName: this.comentariosForm.value.userName,\n      comentario: this.comentariosForm.value.comentario,\n    }\n\n    this.festivalService.agregarComentarios(entrada).then(() => {\n      this.comentariosForm.reset();\n    }, error => {\n      this.toastr.error('Opps.. ocurrio un error', 'Error');\n      console.log(error);\n    })\n  }\n\n  obtenerConcursos(){\n    this.festivalService.obtenerConcursos().subscribe(doc => {\n      this.listConcursos = [];\n      doc.forEach((element: any) => {\n        this.listConcursos.push({\n          id: element.payload.doc.id,\n          ...element.payload.doc.data()\n        })\n      });\n    })\n  }\n\n  obtenerEmpresas(){\n    this.festivalService.obtenerEmpresas().subscribe(doc => {\n      this.listEmpresas = [];\n      doc.forEach((element: any) => {\n        this.listEmpresas.push({\n          id: element.payload.doc.id,\n          ...element.payload.doc.data()\n        })\n      });\n      console.log(this.listEmpresas);\n    })\n  }\n\n  addToFavorites(){\n    if (this.authy.checkIfCurrentUser()) {\n      this.crud.addItem(this.authy.getUserUid(),this.id, this.objFestival[0].nombre, this.objFestival[0].informacion_corta);\n      console.log(\"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"+ this.objFestival[0].informacion_corta);\n      alert(\"SE HA AÑADIDO A TUS FAVORITOS\");\n      return true;\n    }else{\n      alert(\"Para añadir a favoritos tienes que estar logueado primero\");\n      alert(\"SE HA AÑADIDO A TUS FAVORITOS\");\n      return false;\n    }\n    \n  }\n\n  deleteFromFavorites(){\n    if (this.authy.checkIfCurrentUser()) {\n      this.crud.deleteUser(this.authy.getUserUid(),this.id);\n      console.log(\"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"+ this.objFestival[0].nombre);\n      alert(\"SE HA ELIMINADO DE TUS FAVORITOS\");\n      return true;\n    }else{\n      alert(\"Para añadir a eliminar de tus favoritos tienes que estar logueado primero\");\n      return false;\n    }\n  }\n\n  checkLoggedUser() {\n    this.authy.afAuth.onAuthStateChanged((user) => {\n      if (user) {\n        this.authy.readUser().then((data) => {\n          this.isCompany = data.get!(\"company\")\n        })\n        this.userLogged = true;\n      } else {\n        this.userLogged = false;\n      }\n    });\n  }\n\n  changeRoute() {\n    if (this.userLogged){\n      this.router.navigate(['/', 'create']);\n    }\n  } \n\n  compraRoute(){\n    if (this.userLogged){\n      this.router.navigate(['/', 'entradas']);\n    }else{\n      this.router.navigate(['/', 'signupUsers']);\n    }\n  }\n\n  ventaRoute(){\n    if (this.userLogged){\n      this.router.navigate(['/', 'puestoVenta']);\n    }else{\n      this.router.navigate(['/', 'signupCompany']);\n    }\n  }\n\n\n}\n\n\n","\n\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FestivalService {\n\n  constructor(private firestore: AngularFirestore) { }\n\n  obtenerFestival(): Observable<any> {\n    return this.firestore.collection('festivales').snapshotChanges();\n  }\n\n  obtenerComentarios(): Observable<any> {\n    return this.firestore.collection('comentarios').snapshotChanges();\n  }\n\n  agregarComentarios(comentario: any): Promise<any> {\n    return this.firestore.collection('comentarios').add(comentario);\n  }\n\n  obtenerConcursos(): Observable<any> {\n    return this.firestore.collection('concursosActivos').snapshotChanges();\n  }\n\n  obtenerEmpresas(): Observable<any> {\n    return this.firestore.collection('puestoVenta').snapshotChanges();\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}